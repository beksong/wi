$('.dttable').dataTable({

});

$('#myModal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var user_id=link.data('id');
    var name=link.data('name');
    var email=link.data('email');

    var modal=$(this);
    modal.find('.modal-body #user_id').val(user_id);
    modal.find('.modal-body #name').val(name);
    modal.find('.modal-body #email').val(email);
});

$('#remModal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var user_id=link.data('id');
    var name=link.data('name');
    var email=link.data('email');

    var modal=$(this);
    modal.find('.modal-body #user_id').val(user_id);
    modal.find('.modal-body #name').val(name);
    modal.find('.modal-body #email').val(email);
});

$('#mentorModal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var mentor_id=link.data('mentor_id');
    var nip=link.data('nip');
    var name=link.data('name');
    var hp=link.data('hp');
    var email=link.data('email');
    var jabatan=link.data('jabatan');
    var unitkerja=link.data('unitkerja');

    var modal=$(this);
    modal.find('.modal-body #mentor_id').val(mentor_id);
    modal.find('.modal-body #name').val(name);
    modal.find('.modal-body #nip').val(nip);
    modal.find('.modal-body #hp').val(hp);
    modal.find('.modal-body #email').val(email);
    modal.find('.modal-body #jabatan').val(jabatan);
    modal.find('.modal-body #unitkerja').val(unitkerja);
});

$('#editAlumni').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var alumni_id=link.data('alumni_id');
    var nip=link.data('nip');
    var name=link.data('name');
    var hp=link.data('hp');
    var email=link.data('email');
    var unitkerja_skrg=link.data('unitkerja_skrg');
    var jabatan=link.data('jabatan');
    var unitkerja_diklat=link.data('unitkerja_diklat');

    var modal=$(this);
    modal.find('.modal-body #alumni_id').val(alumni_id);
    modal.find('.modal-body #name').val(name);
    modal.find('.modal-body #nip').val(nip);
    modal.find('.modal-body #hp').val(hp);
    modal.find('.modal-body #email').val(email);
    modal.find('.modal-body #jabatan').val(jabatan);
    modal.find('.modal-body #unitkerja_diklat').val(unitkerja_diklat);
    modal.find('.modal-body #unitkerja_skrg').val(unitkerja_skrg);
});

$('#editLembaga').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var lembaga_id=link.data('lembaga_id');
    var nama=link.data('nama');

    var modal=$(this);
    modal.find('.modal-body #lembaga_id').val(lembaga_id);
    modal.find('.modal-body #nama').val(nama);
});

$('#addAngkatan').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var lembaga_id=link.data('lembaga_id');
    var nama=link.data('nama');

    var modal=$(this);
    modal.find('.modal-body #lembaga_id').val(lembaga_id);
    modal.find('.modal-body #nama').val(nama);
});

$('#detailAngkatan').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var angkatan_id=link.data('angkatan_id');
    var lembaga_id=link.data('lembaga_id');
    var nama_diklat=link.data('nama_diklat');
    var jenis_diklat=link.data('jenis_diklat');
    var tahun=link.data('tahun');
    var angkatan=link.data('angkatan');

    var modal=$(this);
    modal.find('.modal-body #lembaga_id').val(lembaga_id).prop("selected",true);
    modal.find('.modal-body #angkatan_id').val(angkatan_id);
    modal.find('.modal-body #nama_diklat').val(nama_diklat);
    modal.find('.modal-body #jenis_diklat').val(jenis_diklat).prop("selected",true);
    modal.find('.modal-body #tahun').val(tahun);
    modal.find('.modal-body #angkatan').val(angkatan);
});

$('#delAngkatan').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var lembaga_id=link.data('lembaga_id');
    var angkatan_id=link.data('angkatan_id');
    var nama_lembaga=link.data('nama_lembaga');
    var nama_diklat=link.data('nama_diklat');
    var tahun=link.data('tahun');
    var angkatan=link.data('angkatan');

    var modal=$(this);
    modal.find('.modal-body #lembaga_id').val(lembaga_id);
    modal.find('.modal-body #nama_lembaga').val(nama_lembaga);
    modal.find('.modal-body #angkatan_id').val(angkatan_id);
    modal.find('.modal-body #nama_diklat').val(nama_diklat);
    modal.find('.modal-body #tahun').val(tahun);
    modal.find('.modal-body #angkatan').val(angkatan);
});

$('#editwidyaiswaramodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var widyaiswara_id=link.data('widyaiswara_id');
    var nama=link.data('nama');
    var nip=link.data('nip');
    
    var modal=$(this);
    modal.find('.modal-body #widyaiswara_id').val(widyaiswara_id);
    modal.find('.modal-body #nama').val(nama);
    modal.find('.modal-body #nip').val(nip);
});

$('#deletewidyaiswaramodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var widyaiswara_id=link.data('widyaiswara_id');
    var nama=link.data('nama');
    var nip=link.data('nip');
    
    var modal=$(this);
    modal.find('.modal-body #widyaiswara_id').val(widyaiswara_id);
    modal.find('.modal-body #nama').val(nama);
    modal.find('.modal-body #nip').val(nip);
});

$('#editmatadiklatmodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var matadiklat_id=link.data('matadiklat_id');
    var nama=link.data('nama');
    
    var modal=$(this);
    modal.find('.modal-body #matadiklat_id').val(matadiklat_id);
    modal.find('.modal-body #nama').val(nama);
});

$('#deletematadiklatmodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var matadiklat_id=link.data('matadiklat_id');
    var nama=link.data('nama');
    
    var modal=$(this);
    modal.find('.modal-body #matadiklat_id').val(matadiklat_id);
    modal.find('.modal-body #nama').val(nama);
});

//dependent combobox
$('.modal-body #lembaga_id').on('change',function(e){
    //console.log(e);
    var lembaga_id=e.target.value;
    $.get('/lembaga/'+lembaga_id,function(data){
        $('.modal-body #angkatan_id').empty();
        $.each(data,function(app,angkatanObj){
            $('.modal-body #angkatan_id').append('<option value="'+angkatanObj.id+'">'+angkatanObj.nama_diklat+'- Angkatan Ke '+angkatanObj.angkatan+'</option>');
        });
    });
});

$(function () {
    $('#tgl').datetimepicker({
        minView: 2,
        format:"yyyy-mm-dd"
    });
});

$('#editpenilaianwidyaiswaramodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var nilai_id=link.data('nilai_id');
    var lembaga_id=link.data('lembaga_id');
    var lembaga_nama=link.data('lembaga_nama');
    var widyaiswara_id=link.data('widyaiswara_id');
    var widyaiswara_nama=link.data('widyaiswara_nama');
    var angkatan_id=link.data('angkatan_id');
    var angkatan_namadiklat=link.data('angkatan_namadiklat');
    var matadiklat_id=link.data('matadiklat_id');
    var matadiklat_nama=link.data('matadiklat_nama');
    var tgl=link.data('tgl');
    var jp=link.data('jp');

    var modal=$(this);
    modal.find('.modal-body #nilai_id').val(nilai_id);
    modal.find('.modal-body #widyaiswara_id').val(widyaiswara_id).prop("selected",true);
    modal.find('.modal-body #lembaga_id').val(lembaga_id).prop("selected",true);
    $.get('/lembaga/'+lembaga_id,function(data){
        $('.modal-body #angkatan_id').empty();
        $.each(data,function(app,angkatanObj){
            $('.modal-body #angkatan_id').append('<option value="'+angkatanObj.id+'">'+angkatanObj.nama_diklat+'- Angkatan Ke '+angkatanObj.angkatan+'</option>');
            $('.modal-body #angkatan_id').val(angkatan_id).prop("selected",true);
        });
    }); 
    modal.find('.modal-body #matadiklat_id').val(matadiklat_id).prop("selected",true);
    modal.find('.modal-body #tgl').val(tgl);
    modal.find('.modal-body #jp').val(jp);
});

$('#delpenilaianwidyaiswaramodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var nilai_id=link.data('nilai_id');
    var lembaga_id=link.data('lembaga_id');
    var lembaga_nama=link.data('lembaga_nama');
    var widyaiswara_id=link.data('widyaiswara_id');
    var widyaiswara_nama=link.data('widyaiswara_nama');
    var angkatan_id=link.data('angkatan_id');
    var angkatan_namadiklat=link.data('angkatan_namadiklat');
    var matadiklat_id=link.data('matadiklat_id');
    var matadiklat_nama=link.data('matadiklat_nama');
    var tgl=link.data('tgl');
    var jp=link.data('jp');
    
    var modal=$(this);
    modal.find('.modal-body #nilai_id').val(nilai_id);
    modal.find('.modal-body #widyaiswara_id').val(widyaiswara_nama);
    modal.find('.modal-body #lembaga_id').val(lembaga_nama);
    modal.find('.modal-body #angkatan_id').val(angkatan_namadiklat);
    modal.find('.modal-body #matadiklat_id').val(matadiklat_nama);
    modal.find('.modal-body #tgl').val(tgl);
    modal.find('.modal-body #jp').val(jp);
});

// modal to handle editing mentoring
$('#editMentoringModal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var mentoring_id=link.data('mentoring_id');
    var mentor_id=link.data('mentor_id');
    var status_mentor_diklat=link.data('status_mentor_diklat');
    var status_mentor_skrg=link.data('status_mentor_skrg');
    var alumni_id=link.data('alumni_id');
    var lembaga_id=link.data('lembaga_id');
    var angkatan_id=link.data('angkatan_id');


    var modal=$(this);
    modal.find('.modal-body #mentoring_id').val(mentoring_id);
    modal.find('.modal-body #mentor_id').val(mentor_id).prop('selected',true);
    modal.find('.modal-body #status_mentor_diklat').val(status_mentor_diklat).prop('checked',true);
    modal.find('.modal-body #status_mentor_skrg').val(status_mentor_skrg).prop('checked',true);
    modal.find('.modal-body #alumni_id').val(alumni_id).prop('selected',true);
    modal.find('.modal-body #lembaga_id').val(lembaga_id).prop('selected',true);
    $.get('/lembaga/'+lembaga_id,function(data){
        $('.modal-body #angkatan_id').empty();
        $.each(data,function(app,angkatanObj){
            $('.modal-body #angkatan_id').append('<option value="'+angkatanObj.id+'">'+angkatanObj.nama_diklat+'- Angkatan Ke '+angkatanObj.angkatan+'</option>');
            $('.modal-body #angkatan_id').val(angkatan_id).prop("selected",true);
        });
    }); 
});

$('#delMentoringModal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var mentoring_id=link.data('mentoring_id');
    var mentor_id=link.data('mentor_id');
    var status_mentor_diklat=link.data('status_mentor_diklat');
    var status_mentor_skrg=link.data('status_mentor_skrg');
    var alumni_id=link.data('alumni_id');
    var lembaga_id=link.data('lembaga_id');
    var angkatan_id=link.data('angkatan_id');


    var modal=$(this);
    modal.find('.modal-body #mentoring_id').val(mentoring_id);
    modal.find('.modal-body #mentor_id').val(mentor_id).prop('selected',true);
    modal.find('.modal-body #status_mentor_diklat').val(status_mentor_diklat).prop('checked',true);
    modal.find('.modal-body #status_mentor_skrg').val(status_mentor_skrg).prop('checked',true);
    modal.find('.modal-body #alumni_id').val(alumni_id).prop('selected',true);
    modal.find('.modal-body #lembaga_id').val(lembaga_id).prop('selected',true);
    $.get('/lembaga/'+lembaga_id,function(data){
        $('.modal-body #angkatan_id').empty();
        $.each(data,function(app,angkatanObj){
            $('.modal-body #angkatan_id').append('<option value="'+angkatanObj.id+'">'+angkatanObj.nama_diklat+'- Angkatan Ke '+angkatanObj.angkatan+'</option>');
            $('.modal-body #angkatan_id').val(angkatan_id).prop("selected",true);
        });
    }); 
});
//modal to handle detilnilai
$('#editdetilnilaimodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var nilai_id=link.data('nilai_id');
    var detil_id=link.data('detil_id');
    var item_nilai_id=link.data('item_nilai_id');
    var uraian=link.data('uraian');
    var nilai=link.data('nilai');

    var modal=$(this);
    modal.find('.modal-body #nilai_id').val(nilai_id);
    modal.find('.modal-body #detil_id').val(detil_id);
    modal.find('.modal-body #item_nilai_id').val(item_nilai_id);
    modal.find('.modal-body #uraian').val(uraian);
    modal.find('.modal-body #nilai').val(nilai);
});

$('#editmquesioner').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var question_id=link.data('question_id');
    var question=link.data('question');
    var diklat=link.data('diklat');
    var questionfor=link.data('questionfor');
    
    var modal=$(this);
    modal.find('.modal-body #question_id').val(question_id);
    modal.find('.modal-body #question').val(question);
    modal.find('.modal-body #diklat').val(diklat).prop('selected',true);
    modal.find('.modal-body #questionfor').val(questionfor).prop('selected',true);
});

$('#delmquesioner').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var question_id=link.data('question_id');
    var question=link.data('question');
    var diklat=link.data('diklat');
    var questionfor=link.data('questionfor');
    
    var modal=$(this);
    modal.find('.modal-body #question_id').val(question_id);
    modal.find('.modal-body #question').val(question);
    modal.find('.modal-body #diklat').val(diklat).prop('selected',true);
    modal.find('.modal-body #questionfor').val(questionfor).prop('selected',true);
});

$('#addopsimquesioner').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var question_id=link.data('question_id');
    var uraian=link.data('uraian');
    var modal=$(this);
    modal.find('.modal-body #question_id').val(question_id);
});

$('#editopsimodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var opsi_id=link.data('opsi_id');
    var opsi=link.data('opsi');
    var uraian=link.data('uraian');
    var modal=$(this);
    modal.find('.modal-body #opsi_id').val(opsi_id);
    modal.find('.modal-body #pilihan').val(opsi);
    if(uraian==1){
        modal.find('.modal-body #uraian').val(uraian).prop('checked',true);
    }else{
        modal.find('.modal-body #uraian').val(0).prop('checked',false);
    }
});

$('#delopsimodal').on('show.bs.modal',function(e){
    var link=$(e.relatedTarget);
    var opsi_id=link.data('opsi_id');
    var opsi=link.data('opsi');
        
    var modal=$(this);
    modal.find('.modal-body #opsi_id').val(opsi_id);
    modal.find('.modal-body #pilihan').val(opsi);
});